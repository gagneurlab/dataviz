<!DOCTYPE html>
<html>
<head>
  <title>Data Analysis and Visualization in R</title>
  <meta charset="utf-8">
  <meta name="description" content="Data Analysis and Visualization in R">
  <meta name="author" content="Daniela Klaproth-Andrade, Daniel Bader, Jun Cheng, Jan Krumsiek, Julien Gagneur">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="libraries/widgets/bootstrap/css/bootstrap.css"></link>
<link rel=stylesheet href="libraries/widgets/quiz/css/demo.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  
  <hgroup class="auto-fadein">
    <h1>Data Analysis and Visualization in R</h1>
    <h2>Grammar of graphics and plotting I</h2>
    <p>Daniela Klaproth-Andrade, Daniel Bader, Jun Cheng, Jan Krumsiek, Julien Gagneur<br/></p>
  </hgroup>
  
  <article></article>  
  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  
  <article data-timings="">
    <!-- Center image on slide -->

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>

<script type='text/javascript'>
$(function() {
    $("p:has(img)").addClass('centered');
});
</script>

<p></script></p>

<script type = 'text/javascript'>
$('p:has(img.build)').addClass('build')
</script>

<script type='text/javascript'>
// parameters
var sections = ["Grammar of graphics", "1 continuous variable", "2 variables - one discrete, one continuous", "2 variables - both continuous", "Axes and labels"];
var title = "Overview";
var fontsize = "20pt"
var unselected_color = "#888888"
// function
function toc(cur) {
  // header
  document.write("<h2>"+title+"</h2>");
  // find current
  ind = sections.indexOf(cur);
  if (ind==-1 && cur.length>0) {
     document.write("<br/>Error: section not defined '"+cur+"'");
     return;
  }
  // write all out
  document.write("<br/><ul>");
  for (i = 0; i < sections.length; i++) { 
    if (cur=="") 
      // all the same
      document.write("<li style='font-size:"+fontsize+"'>"+sections[i]+"</li>");
    else {
      if (i==ind)
        document.write("<li style='font-size:"+fontsize+"'><b>"+sections[i]+"</b></li>");
      else
        document.write("<li style='color:"+unselected_color+";font-size:"+fontsize+"'>"+sections[i]+"</li>");
    }
  }
  document.write("</ul>");
}
</script>

<!-- START LECTURE -->

<pre><code>## Error in knitr::include_graphics(&quot;assets/img/lec05_syllabus.png&quot;): Cannot find the file(s): &quot;assets/img/lec05_syllabus.png&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-2" style="background:;">
  
  <hgroup>
    <h2>Why plotting?</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Data in scientific publications is shown as plots, sure. But there is more.</p>

<p><strong>A realistic example to warm up</strong>:</p>

<p>A vector containing 500 (hypothetical) height measurements for adults in Germany:</p>

<pre><code class="r">length(height)
</code></pre>

<pre><code>## [1] 500
</code></pre>

<pre><code class="r">head(height, n=20)
</code></pre>

<pre><code>##  [1] 1.706833 1.635319 1.709841 1.707259 1.668659 1.580702 1.608214 1.636738
##  [9] 1.649740 1.758209 1.684362 1.614045 1.598355 1.636974 1.636535 1.631482
## [17] 1.661350 1.609864 1.669606 1.594311
</code></pre>

<p>We want to know their average height:</p>

<pre><code class="r">mean(height)
</code></pre>

<pre><code>## [1] 1.976743
</code></pre>

<p>Wait... what?</p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-3" style="background:;">
  
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <pre><code class="r">mean(height)
</code></pre>

<pre><code>## [1] 1.976743
</code></pre>

<p><br/></p>

<p>What happened?</p>

<ol>
<li><p>A. <code>mean()</code> is not the right function to assess what we want to know.</p></li>
<li><p>B. Adults in Germany are exceptionally tall</p></li>
<li><p>C. <em>A decimal point error in one data point.</em></p></li>
<li><p>D. It&#39;s a multiple testing problem because we are looking at so many data points (n=500).</p></li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  
<div class="quiz-explanation">
  <p>See next slide</p>

</div>
</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-4" style="background:;">
  
  <hgroup>
    <h2>Solution</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">mean(height)
</code></pre>

<pre><code>## [1] 1.976743
</code></pre>

<p><strong>What happened?</strong><br/></p>

<ul>
<li>A. <code>mean()</code> is not the right function to assess what we want to know.

<ul>
<li><em>No, the mean is exactly what we want.</em></li>
</ul></li>
<li>B. Adults in Germany are exceptionally tall.

<ul>
<li><em>OK, no...</em></li>
</ul></li>
<li><strong>C. A decimal point error in one data point.</strong>

<ul>
<li><em>Yes, see next slide.</em></li>
</ul></li>
<li>D. It&#39;s a multiple testing problem because we are looking at so many data points (n=500).

<ul>
<li><em>This question was intentionally misleading, this does not have anything to do with multiple testing.</em></li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-5" style="background:;">
  
  <hgroup>
    <h2>The outlier...</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">plot(height)
hist(height)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-7-1.png" title="plot of chunk unnamed-chunk-7" alt="plot of chunk unnamed-chunk-7" width="300px" height="400px" /><img src="assets/fig/unnamed-chunk-7-2.png" title="plot of chunk unnamed-chunk-7" alt="plot of chunk unnamed-chunk-7" width="300px" height="400px" /></p>

<pre><code class="r">mean(height)
</code></pre>

<pre><code>## [1] 1.976743
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-6" style="background:;">
  
  <hgroup>
    <h2>The outlier...</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Getting rid of the outlier fixes the dataset</p>

<pre><code class="r">fheight &lt;- height[height &lt; 3]
</code></pre>

<pre><code class="r">plot(fheight)
hist(fheight)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-10-1.png" title="plot of chunk unnamed-chunk-10" alt="plot of chunk unnamed-chunk-10" width="300px" height="400px" /><img src="assets/fig/unnamed-chunk-10-2.png" title="plot of chunk unnamed-chunk-10" alt="plot of chunk unnamed-chunk-10" width="300px" height="400px" /></p>

<pre><code class="r">mean(fheight)
</code></pre>

<pre><code>## [1] 1.650043
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-7" style="background:;">
  
  <hgroup>
    <h2>The outlier...</h2>
  </hgroup>
  
  <article data-timings="">
    <p>This is how the broken dataset was generated:</p>

<pre><code class="r">height &lt;- c(rnorm(499, mean=1.65, sd=0.045), 165)
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-8" style="background:;">
  
  <hgroup>
    <h2>Visualization and the scientific method</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Data visualization is important for:</p>

<ul>
<li>Exploring the data. Reveal surprising facts.</li>
<li>Convingly showing interesting relationships.<br></li>
</ul>

<pre><code>## Error in knitr::include_graphics(&quot;assets/img/lec05_scientific-method.png&quot;): Cannot find the file(s): &quot;assets/img/lec05_scientific-method.png&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-9" style="background:;">
  
  <hgroup>
    <h2>Our 3 visualization lectures</h2>
  </hgroup>
  
  <article data-timings="">
    <p>This lecture and the two following ones will cover:</p>

<ul>
<li>Grammar of graphics: a modular and felxible framework to build plots</li>
<li>Standard plots based on dimension and nature of the data (discrete / continuous)</li>
<li>Colors</li>
<li>Dos and don&#39;ts</li>
<li>Algorithms for exploring high-dimensional data</li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-10" style="background:;">
  
  <article data-timings="">
    <script type='text/javascript'>toc("")</script>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-11" style="background:;">
  
  <article data-timings="">
    <script type='text/javascript'>toc("Grammar of graphics")</script>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-12" style="background:;">
  
  <hgroup>
    <h2>Grammar of Graphics</h2>
  </hgroup>
  
  <article data-timings="">
    <p>The Grammar of Graphics is a visualization theory developed by 
Leland Wilkinson in 1999.
<br> </p>

<ul>
<li>influenced the development of graphics and visualization libraries alike </li>
<li>3 key principles

<ul>
<li>Separation of data from aesthetics (e.g. x and y axis, color-coding)</li>
<li>Definition of common plot/chart elements (e.g. dot plots, boxplots, etc.)</li>
<li>Composition of these common elements (one can combine elements as layers)</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-13" style="background:;">
  
  <hgroup>
    <h2>ggplot2 and Grammar of Graphics</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(mpg, aes(x=displ, y=cty, colour=class)) +  # Data: how variables in the data are mapped to aesthetic attributes 
  geom_point() +  # Layers: made up of geometric elements and statistical transformation.
  facet_wrap(~ class, ncol=4) + # Facets
  theme(axis.title = element_text(size=15), legend.title = element_text(size=15)) +
  labs(title=&#39;displ vs cty&#39;, x=&#39;Engine displacement&#39;, y=&#39;city miles per gallon&#39;) +
  stat_smooth() # Stats
</code></pre>

<p><img src="assets/fig/lec05_plt1-1.png" title="plot of chunk lec05_plt1" alt="plot of chunk lec05_plt1" width="700px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-14" style="background:;">
  
  <hgroup>
    <h2>Grammar Defines Components of Graphics</h2>
  </hgroup>
  
  <article data-timings="">
    <p><strong>Data:</strong> data.frame (or data.table) object where columns correspond to variables</p>

<p><strong>Aesthetics:</strong> describes visual characteristics that represent data (<code>aes</code>)</p>

<ul>
<li>position (x,y), color, size, shape, transparency</li>
</ul>

<p><strong>Layers:</strong> made up of geometric objects that represent data (<code>geom_</code>)</p>

<ul>
<li>points, lines, boxplots, ...</li>
</ul>

<p><strong>Scales:</strong> for each aesthetic, describes how visual characteristic is converted to display values (<code>scale_</code>)</p>

<ul>
<li>log scales, color scales, size scales, shape scales, ...</li>
</ul>

<p><strong>Facets:</strong> describes how data is split into subsets and displayed as multiple sub graphs (<code>facet_</code>)</p>

<p><strong>Stats:</strong> statistical transformations that typically summarize data (<code>stat</code>)</p>

<ul>
<li>counts, means, medians, regression lines, ...</li>
</ul>

<p><strong>Coordinate system:</strong> describes 2D space that data is projected onto (<code>coord_</code>)</p>

<ul>
<li>Cartesian coordinates, polar coordinates, map projections, ...</li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-15" style="background:;">
  
  <hgroup>
    <h2>Simple example: Human Development versus Corruption Perception</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ind &lt;- fread(&#39;../extdata/CPI_HDI.csv&#39;)
</code></pre>

<pre><code>## Error in fread(&quot;../extdata/CPI_HDI.csv&quot;): File &#39;../extdata/CPI_HDI.csv&#39; does not exist or is non-readable. getwd()==&#39;/data/nasif12/home_if12/theodora/Projects/dataviz/lectures-WS2021/topic04_Plotting-I/slides&#39;
</code></pre>

<pre><code class="r">ind
</code></pre>

<pre><code>##       V1     country wbcode CPI   HDI            region
##   1:   1 Afghanistan    AFG  12 0.465      Asia Pacific
##   2:   2     Albania    ALB  33 0.733 East EU Cemt Asia
##   3:   3     Algeria    DZA  36 0.736              MENA
##   4:   4      Angola    AGO  19 0.532               SSA
##   5:   5   Argentina    ARG  34 0.836          Americas
##  ---                                                   
## 147: 147     Uruguay    URY  73 0.793          Americas
## 148: 148  Uzbekistan    UZB  18 0.675 East EU Cemt Asia
## 149: 149       Yemen    YEM  19 0.498              MENA
## 150: 150      Zambia    ZMB  38 0.586               SSA
## 151: 151    Zimbabwe    ZWE  21 0.509               SSA
</code></pre>

<p><br>
CPI: Corruption Perceptions Index (<a href="http://www.transparency.org/">http://www.transparency.org/</a>)
HDI: Human Development Index (<a href="http://hdr.undp.org/">http://hdr.undp.org/</a>)
Year: 2014</p>

<h2><br></h2>

<h2>Simple example: Human Development versus Corruption Perception</h2>

<pre><code class="r">ggplot(ind, aes(CPI, HDI)) + geom_point()
</code></pre>

<p><img src="assets/fig/lec05_plt2-1.png" title="plot of chunk lec05_plt2" alt="plot of chunk lec05_plt2" width="500px" height="400px" /></p>

<p><br>
CPI: Corruption Perceptions Index (<a href="http://www.transparency.org/">http://www.transparency.org/</a>)
HDI: Human Development Index (<a href="http://hdr.undp.org/">http://hdr.undp.org/</a>)
Year: 2014</p>

<h2><br></h2>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-16" style="background:;">
  
  <hgroup>
    <h2>Simple scatter plot</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(ind, aes(CPI, HDI)) + 
  geom_point()
</code></pre>

<p><img src="assets/fig/lec05_plt3-1.png" title="plot of chunk lec05_plt3" alt="plot of chunk lec05_plt3" width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-17" style="background:;">
  
  <hgroup>
    <h2>ggplot returns an object</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">p &lt;- ggplot(ind, aes(CPI, HDI)) + geom_point()
p
</code></pre>

<p><img src="assets/fig/lec05_plt7-1.png" title="plot of chunk lec05_plt7" alt="plot of chunk lec05_plt7" width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-18" style="background:;">
  
  <hgroup>
    <h2>ggplot returns an object</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">names(p)
</code></pre>

<pre><code>## [1] &quot;data&quot;        &quot;layers&quot;      &quot;scales&quot;      &quot;mapping&quot;     &quot;theme&quot;      
## [6] &quot;coordinates&quot; &quot;facet&quot;       &quot;plot_env&quot;    &quot;labels&quot;
</code></pre>

<pre><code class="r">saveRDS(p, &quot;../extdata/lec06_p.rds&quot;)
</code></pre>

<pre><code>## Error in gzfile(file, mode): cannot open the connection
</code></pre>

<pre><code class="r">p &lt;- readRDS(&quot;../extdata/lec06_p.rds&quot;)
</code></pre>

<pre><code>## Error in gzfile(file, &quot;rb&quot;): cannot open the connection
</code></pre>

<pre><code class="r">p + geom_hline(yintercept = 0.7)
</code></pre>

<p><img src="assets/fig/lec05_plt8-1.png" title="plot of chunk lec05_plt8" alt="plot of chunk lec05_plt8" width="400px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-19" style="background:;">
  
  <hgroup>
    <h2>Mapping of aesthetics done globally at <code>ggplot()</code></h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(ind, aes(CPI, HDI)) + 
  geom_point(size=0.5) + 
  geom_text(aes(label = wbcode), size=2, vjust=0)
</code></pre>

<p><img src="assets/fig/lec05_plt4-1.png" title="plot of chunk lec05_plt4" alt="plot of chunk lec05_plt4" width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-20" style="background:;">
  
  <hgroup>
    <h2>Mapping of aesthetics can be done globally at <code>ggplot()</code> or at individual layers</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(ind) + 
  geom_point(aes(CPI, HDI))
</code></pre>

<p><img src="assets/fig/lec05_plt12-1.png" title="plot of chunk lec05_plt12" alt="plot of chunk lec05_plt12" width="500px" height="400px" /></p>

<p>Global mapping is inherited by default to all geom layers, while <code>aes</code> mapping at individual layer is only recognized at that layer.</p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-21" style="background:;">
  
  <hgroup>
    <h2>Mapping of aesthetics done at individual layers</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(ind) + 
  geom_point(aes(CPI, HDI), size=0.5) + 
  geom_text(aes(CPI, HDI, label = wbcode), size=2, vjust=0)
</code></pre>

<p><img src="assets/fig/lec05_plt5-1.png" title="plot of chunk lec05_plt5" alt="plot of chunk lec05_plt5" width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-22" style="background:;">
  
  <hgroup>
    <h2>Individual layer mapping cannot be recognized by other layers</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(ind) + 
  geom_point(aes(CPI, HDI)) + 
  geom_text(aes(label = wbcode))
</code></pre>

<pre><code>## Error: geom_text requires the following missing aesthetics: x and y
</code></pre>

<p><img src="assets/fig/lec05_plt6-1.png" title="plot of chunk lec05_plt6" alt="plot of chunk lec05_plt6" width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-23" style="background:;">
  
  <hgroup>
    <h2>You can easily map variables to different colours, sizes or shapes!</h2>
  </hgroup>
  
  <article data-timings="">
    <p>ggplot2 automatically scales for you.</p>

<pre><code class="r">ggplot(data = ind) + 
  geom_point(aes(CPI, HDI, color = region))
</code></pre>

<p><img src="assets/fig/lec05_plt9-1.png" title="plot of chunk lec05_plt9" alt="plot of chunk lec05_plt9" width="600px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-24" style="background:;">
  
  <hgroup>
    <h2>You can easily map variables to different colours, sizes or shapes!</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(data = ind) + 
  geom_point(aes(CPI, HDI, shape = region))
</code></pre>

<p><img src="assets/fig/lec05_plt10-1.png" title="plot of chunk lec05_plt10" alt="plot of chunk lec05_plt10" width="600px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-25" style="background:;">
  
  <hgroup>
    <h2>Aesthetic mappings can also be supplied in individual layers</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(ind, aes(CPI, HDI)) + 
  geom_point(aes(color = region))
</code></pre>

<p><img src="assets/fig/lec05_plt11-1.png" title="plot of chunk lec05_plt11" alt="plot of chunk lec05_plt11" width="600px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-26" style="background:;">
  
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <p>What&#39;s the result of the following command?</p>

<p><code>ggplot(data = mpg)</code></p>

<ol>
<li><p>A Nothing happens</p></li>
<li><p>B <em>A blank figure will be produced</em></p></li>
<li><p>C A blank figure with axes will be produced</p></li>
<li><p>D All data in <code>mpg</code> will be visualized</p></li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  
<div class="quiz-hint">
  <p>ggplot builds plot layer by layer. </p>

</div>

<div class="quiz-explanation">
  <p>Neither variables were mapped nor geometry specified. </p>

</div>
</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-27" style="background:;">
  
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <p>What&#39;s the result of the following command?</p>

<p><code>ggplot(data = mpg, aes(x = hwy, y = cty))</code></p>

<ol>
<li><p>A Nothing happens</p></li>
<li><p>B A blank figure will be produced</p></li>
<li><p>C <em>A blank figure with axes will be produced</em></p></li>
<li><p>D A scatter plot will be produced</p></li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  
<div class="quiz-hint">
  <p>ggplot builds plot layer by layer. </p>

</div>

<div class="quiz-explanation">
  <p>Axis x and y are mapped. But no geometry specified.</p>

</div>
</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-28" style="background:;">
  
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <p>What&#39;s the result of the following command?</p>

<p><code>ggplot(data = mpg, aes(x = hwy, y = cty)) + geom_point()</code></p>

<ol>
<li><p>A Nothing happens</p></li>
<li><p>B A blank figure will be produced</p></li>
<li><p>C A blank figure with axes will be produced</p></li>
<li><p>D <em>A scatter plot will be produced</em></p></li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  
<div class="quiz-hint">
  <p>ggplot builds plot layer by layer. </p>

</div>

<div class="quiz-explanation">
  <p>Data, axes and geometry specified.</p>

</div>
</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-29" style="background:;">
  
  <hgroup>
    <h2>Answers</h2>
  </hgroup>
  
  <article data-timings="">
    <p><code>ggplot(data = mpg)</code>: a blank figure will be produced</p>

<p><code>ggplot(data = mpg, aes(x = hwy, y = cty))</code>: A blank figure with axes will be produced</p>

<p><code>ggplot(data = mpg, aes(x = hwy, y = cty)) + geom_point()</code>: A scatter plot will be produced</p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-30" style="background:;">
  
  <article data-timings="">
    <script type='text/javascript'>toc("1 continuous variable")</script>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-31" style="background:;">
  
  <hgroup>
    <h2>Histogram</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Histogram of Human Development Index (HDI) in the ind dataset: </p>

<pre><code class="r">ind
</code></pre>

<pre><code>##       V1     country wbcode CPI   HDI            region
##   1:   1 Afghanistan    AFG  12 0.465      Asia Pacific
##   2:   2     Albania    ALB  33 0.733 East EU Cemt Asia
##   3:   3     Algeria    DZA  36 0.736              MENA
##   4:   4      Angola    AGO  19 0.532               SSA
##   5:   5   Argentina    ARG  34 0.836          Americas
##  ---                                                   
## 147: 147     Uruguay    URY  73 0.793          Americas
## 148: 148  Uzbekistan    UZB  18 0.675 East EU Cemt Asia
## 149: 149       Yemen    YEM  19 0.498              MENA
## 150: 150      Zambia    ZMB  38 0.586               SSA
## 151: 151    Zimbabwe    ZWE  21 0.509               SSA
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-32" style="background:;">
  
  <hgroup>
    <h2>Histogram</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Histogram of Human Development Index (HDI) in the ind dataset: </p>

<pre><code class="r">ggplot(ind, aes(HDI)) +
  geom_histogram() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_hist1-1.png" title="plot of chunk lec05_hist1" alt="plot of chunk lec05_hist1" width="600px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-33" style="background:;">
  
  <hgroup>
    <h2>Histogram: setting the number of bins</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Histogram of Human Development Index (HDI) in the ind dataset: </p>

<pre><code class="r">ggplot(ind, aes(HDI)) +
  geom_histogram(bins=10) + mytheme
</code></pre>

<p><img src="assets/fig/lec05_hist2-1.png" title="plot of chunk lec05_hist2" alt="plot of chunk lec05_hist2" width="600cm" height="1200cm" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-34" style="background:;">
  
  <hgroup>
    <h2>Density plots</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Histograms are sometimes not optimal to investigate the distribution of a variable due to discretization effects during the binning process.<br/><br/>
Solution: smoothed distribution plot by kernel density estimation:<br/>
<a href="https://en.wikipedia.org/wiki/Kernel_density_estimation">https://en.wikipedia.org/wiki/Kernel_density_estimation</a></p>

<p>Density plot of Human Development Index (HDI) in the ind dataset: </p>

<pre><code class="r">ggplot(ind, aes(HDI)) +
  geom_density() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_density1-1.png" title="plot of chunk lec05_density1" alt="plot of chunk lec05_density1" width="380px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-35" style="background:;">
  
  <hgroup>
    <h2>Kernel density plots - smoothing bandwidth</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Can be set manually. Default option is a bandwidth rule (which is usually a good choice). Be careful with density plots as the bandwith can have a huge impact on the visualization -&gt; histograms can be better.</p>

<pre><code class="r">ggplot(ind, aes(HDI)) +  geom_density(bw=0.01) + mytheme  # small bandwith
</code></pre>

<p><img src="assets/fig/lec05_hist3-1.png" title="plot of chunk lec05_hist3" alt="plot of chunk lec05_hist3" width="250px" height="400px" /></p>

<pre><code class="r">ggplot(ind, aes(HDI)) +  geom_density(bw=1) + mytheme  # large bandwith
</code></pre>

<p><img src="assets/fig/lec05_density2-1.png" title="plot of chunk lec05_density2" alt="plot of chunk lec05_density2" width="250px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-36" style="background:;">
  
  <hgroup>
    <h2>Boxplot</h2>
  </hgroup>
  
  <article data-timings="">
    <p><img src="./assets/img/lec06_07_plotting/lec06_Boxplot_vs_PDF.png" width="400"></p>

<p>from <a href="https://en.wikipedia.org/wiki/Box_plot">https://en.wikipedia.org/wiki/Box_plot</a><br/><br/></p>

<ul>
<li>median = the center of the data, middle value in sorted list, 50% quantile of the data</li>
<li>quartiles = 25% and 75% quantiles of the data. IQR: interquartile range</li>
<li>lines coming out of the box are called &quot;whiskers&quot;</li>
<li>whiskers reach to the most extreme datapoint within \(\pm  1.5\times IQR\)</li>
<li>anything outside of the &quot;whiskers&quot; is plotted as an &quot;outlier&quot;</li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-37" style="background:;">
  
  <hgroup>
    <h2>A boxplot example</h2>
  </hgroup>
  
  <article data-timings="">
    <p><img src="assets/fig/lec05_boxplot1-1.png" title="plot of chunk lec05_boxplot1" alt="plot of chunk lec05_boxplot1" width="400px" height="800px" /></p>

<p>It is possible to not show the outliers. However, we strongly recommend to keep them.
Outliers can reveal interesting data points (discoveries &quot;out of the box&quot;) or bugs in data preprocessing. </p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-38" style="background:;">
  
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <p>For which type of data will boxplots produce meaningful visualizations? (2 possible answers)</p>

<ol>
<li><p>A. For discrete data.</p></li>
<li><p>B. For bi-modal distributions.</p></li>
<li><p>C. For non-Gaussian, symmetric data.</p></li>
<li><p>D. For exponentially distributed data.</p></li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  
<div class="quiz-explanation">
  <p>See next slide</p>

</div>
</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-39" style="background:;">
  
  <hgroup>
    <h2>Solution</h2>
  </hgroup>
  
  <article data-timings="">
    <p><strong>For which type of data will boxplots produce meaningful visualizations?</strong></p>

<ul>
<li><strong>C. For non-Gaussian, symmetric data.</strong></li>
<li><strong>D. For exponentially distributed data.</strong></li>
</ul>

<p>Boxplots are bad for bimodal data since they only show one mode (the median), but are ok for both symmetric and non-symmetric data, since the quartiles are not symmetric.</p>

<pre><code class="r">dt &lt;- data.table(x=c(1,1,1,2,2,2,8,8,8), # Discrete data, bad for boxplot
                 y=rbeta(n=1000,shape1=2,shape2=2),
                 z=rexp(n=1000, rate=1),
                 group=&#39;x&#39;) %&gt;% melt(id.var=&quot;group&quot;)
ggplot(dt, aes(group, value)) + geom_boxplot() + facet_wrap(~variable) + mytheme
</code></pre>

<p><img src="assets/fig/lec05_boxplot2-1.png" title="plot of chunk lec05_boxplot2" alt="plot of chunk lec05_boxplot2" width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-40" style="background:;">
  
  <hgroup>
    <h2>Boxplots and multi-modal distributions</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">x = c(rnorm(100,1), rnorm(100,1)+5)
hist(x)
boxplot(x)
</code></pre>

<p><img src="assets/fig/lec05_boxplot3-1.png" title="plot of chunk lec05_boxplot3" alt="plot of chunk lec05_boxplot3" width="400px" height="400px" /><img src="assets/fig/lec05_boxplot3-2.png" title="plot of chunk lec05_boxplot3" alt="plot of chunk lec05_boxplot3" width="400px" height="400px" /></p>

<p>Boxplot does not properly represent the distribution.</p>

<pre><code>## Error in fread(&quot;../extdata/CPI_HDI.csv&quot;): File &#39;../extdata/CPI_HDI.csv&#39; does not exist or is non-readable. getwd()==&#39;/data/nasif12/home_if12/theodora/Projects/dataviz/lectures-WS2021/topic04_Plotting-I/slides&#39;
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-41" style="background:;">
  
  <article data-timings="">
    <script type='text/javascript'>toc("2 variables - one discrete, one continuous")</script>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-42" style="background:;">
  
  <hgroup>
    <h2>Boxplot by category</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(mpg, aes(class, hwy)) +
  geom_boxplot() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_boxplot4-1.png" title="plot of chunk lec05_boxplot4" alt="plot of chunk lec05_boxplot4" width="600px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-43" style="background:;">
  
  <hgroup>
    <h2>Violin plot</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(mpg, aes(class, hwy)) +
  geom_violin() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_boxplot5-1.png" title="plot of chunk lec05_boxplot5" alt="plot of chunk lec05_boxplot5" width="600px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-44" style="background:;">
  
  <hgroup>
    <h2>Beanplot</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Useful only up to a certain number of data points. Use the package ggbeeswarm:</p>

<pre><code class="r"># install.packages(&quot;ggbeeswarm&quot;)
library(ggbeeswarm)
ggplot(mpg, aes(class, hwy)) + 
  geom_beeswarm() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_beeswarm-1.png" title="plot of chunk lec05_beeswarm" alt="plot of chunk lec05_beeswarm" width="600px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-45" style="background:;">
  
  <hgroup>
    <h2>Barplots</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>bars are visual <code>heavyweights</code> compared to dots and lines </li>
<li>combining two attributes of 2-D location and 
line length to encode quantitative values</li>
<li>bars emphasize the individual values 
of the thing being measured per categorical subdivision</li>
<li>focus attention primarily on individual 
values and support the comparison of one to another</li>
</ul>

<pre><code class="r">ggplot(countries_dt, aes(Continent, Number_countries)) + 
  geom_bar(stat = &#39;identity&#39;, width = .7) + mytheme
</code></pre>

<p><img src="assets/fig/lec05_coun, -1.png" title="plot of chunk lec05_coun, " alt="plot of chunk lec05_coun, " width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-46" style="background:;">
  
  <hgroup>
    <h2>When to use a Barplot?</h2>
  </hgroup>
  
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <ol>
<li>A To show a connection between a series of individual data points</li>
<li>B To show a correlation between two quantitative variables</li>
<li>C <em>To highlight individual quantitative values per category</em></li>
<li>D To compare distributions of quantitative values across categories</li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  </div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-47" style="background:;">
  
  <hgroup>
    <h2>When to use a Barplot?</h2>
  </hgroup>
  
  <article data-timings="">
    <p>C <strong>To highlight individual quantitative values per category</strong></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-48" style="background:;">
  
  <hgroup>
    <h2>Visualize uncertainty</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Visualizing uncertainty is important, otherwise barplots can be misleading. One way to visualize uncertainty is with error bars.</p>

<ul>
<li>Standard deviation (SD) and standard error of the mean (SEM) as error bars. SD and SEM are completely different concepts!

<ul>
<li>SD indicates the variation of quantity in the sample.</li>
<li>SEM represents how well the mean is estimated.</li>
</ul></li>
</ul>

<p>The central limit theorem implies that: \(SEM = SD / \sqrt{(n)}\) , where \(n\) is the sample size (number of observations).</p>

<p>With large \(n\), SEM tends to 0.</p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-49" style="background:;">
  
  <hgroup>
    <h2>Barplots with error bars</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Explain what this code does:</p>

<pre><code class="r">as.data.table(mpg) %&gt;% 
  .[, .(mean = mean(hwy),
        sd = sd(hwy)),
    by = class] %&gt;% 
  ggplot(aes(class, mean, ymax=mean+sd, ymin=mean-sd)) + 
  geom_bar(stat=&#39;identity&#39;) +
  geom_errorbar(width = 0.3) + mytheme
</code></pre>

<p><img src="assets/fig/lec05_erb, -1.png" title="plot of chunk lec05_erb, " alt="plot of chunk lec05_erb, " width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-50" style="background:;">
  
  <article data-timings="">
    <script type='text/javascript'>toc("2 variables - both continuous")</script>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-51" style="background:;">
  
  <hgroup>
    <h2>Scatterplot</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Scatterplots are useful for easily visualizing the relationship between two continuous variables </p>

<pre><code class="r">ggplot(mpg, aes(displ, hwy)) +
  geom_point() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_point1-1.png" title="plot of chunk lec05_point1" alt="plot of chunk lec05_point1" width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-52" style="background:;">
  
  <hgroup>
    <h2>Scatterplot with too many colors can be hard to read</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(mpg, aes(displ, hwy, color=class)) +
  geom_point() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_point2-1.png" title="plot of chunk lec05_point2" alt="plot of chunk lec05_point2" width="600px" height="400px" /></p>

<p>Too many colors, hard to distinguish. One can use <code>facet</code> to separate them into different plots.</p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-53" style="background:;">
  
  <hgroup>
    <h2>2D density plots</h2>
  </hgroup>
  
  <article data-timings="">
    <p>2D plots count the number of observations within a particular area of the 2D space and are better suited than scatter plots for large datasets</p>

<pre><code class="r">x &lt;- rnorm(10000); y=x+rnorm(10000)
data.table(x, y) %&gt;% ggplot(aes(x, y)) +
  geom_hex() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_hex-1.png" title="plot of chunk lec05_hex" alt="plot of chunk lec05_hex" width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-54" style="background:;">
  
  <hgroup>
    <h2>When to use a line plot?</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Two main goals:</p>

<ul>
<li>To <code>connect</code> a series of individual data points</li>
<li>To display the <code>trend</code> of a series of data points.</li>
</ul>

<p>Why:</p>

<ul>
<li>showing the shape of data as it flows and changes from point to point. </li>
<li>strength: movement of values up and down through time</li>
<li>it&#39;s often difficult to discern the overall trend of scatter plots, 
but a simple trend line can bring it into sharp focus.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-55" style="background:;">
  
  <hgroup>
    <h2>When to use a line plot?</h2>
  </hgroup>
  
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <ol>
<li>A <em>To show a connection between a series of individual data points</em></li>
<li>B To show a correlation between two quantitative variables</li>
<li>C To highlight individual quantitative values per category</li>
<li>D To compare distributions of quantitative values across categories</li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  </div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-56" style="background:;">
  
  <hgroup>
    <h2>When to use a line plot?</h2>
  </hgroup>
  
  <article data-timings="">
    <p>A <strong>To show a connection between a series of individual data points</strong></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-57" style="background:;">
  
  <hgroup>
    <h2>Line plot</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(economics, aes(date, unemploy / pop)) +
  geom_line() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_line-1.png" title="plot of chunk lec05_line" alt="plot of chunk lec05_line" width="500px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-58" style="background:;">
  
  <article data-timings="">
    <script type='text/javascript'>toc("Axes and labels")</script>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-59" style="background:;">
  
  <hgroup>
    <h2>Every aesthetic has a scale</h2>
  </hgroup>
  
  <article data-timings="">
    <p>ggplot automatically scales aesthetics, e.g. <code>x, y, colour, size, shape, fill...</code>. </p>

<p>What happens to:</p>

<pre><code class="r">ggplot(ind, aes(CPI, HDI)) +
  geom_point(aes(color=region)) + mytheme
</code></pre>

<p>is actually:</p>

<pre><code class="r">ggplot(ind, aes(CPI, HDI)) +
  geom_point(aes(color=region)) +
  scale_x_continuous() +
  scale_y_continuous() + mytheme
</code></pre>

<p>You can <strong>overwrite</strong> them with <code>scale_*</code> commands.</p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-60" style="background:;">
  
  <hgroup>
    <h2>Overwrite scales, example:</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>log scale</li>
</ul>

<pre><code class="r">ggplot(ind, aes(CPI, HDI)) +
  geom_point(aes(color=region)) +
  scale_x_log10() + mytheme
</code></pre>

<p><img src="assets/fig/lec05_point6-1.png" title="plot of chunk lec05_point6" alt="plot of chunk lec05_point6" width="600px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-61" style="background:;">
  
  <hgroup>
    <h2>Specify axis breaks</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(ind, aes(CPI, HDI)) +
  geom_point(aes(color=region)) +
  scale_x_log10(breaks=c(10, 20, 50, 100)) + mytheme
</code></pre>

<p><img src="assets/fig/lec05_point8-1.png" title="plot of chunk lec05_point8" alt="plot of chunk lec05_point8" width="600px" height="400px" /></p>

<p>Same operations apply to y axis. </p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-62" style="background:;">
  
  <hgroup>
    <h2>Change axis title</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Changing label is a so frequent task that ggplot has several ways to do it:</p>

<pre><code class="r">ggplot(ind, aes(CPI, HDI)) +
  geom_point(aes(color=region)) +
  labs(x = &#39;Corruption Perceptions Index&#39;, 
       y = &#39;Human Development Index&#39;,
       title = &#39;Corruption vs Human Development&#39;,
       color = &#39;Region&#39;) + mytheme
</code></pre>

<p><img src="assets/fig/lec05_point10-1.png" title="plot of chunk lec05_point10" alt="plot of chunk lec05_point10" width="500px" height="400px" /></p>

<p>Try also with <code>xlabs</code>, <code>ylabs</code>, <code>ggtitle</code>, <code>scale_x_continuous</code>, <code>scale_y_continuous</code>.</p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-63" style="background:;">
  
  <hgroup>
    <h2>Change axis limits</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">df &lt;- data.table(x = rep(c(&quot;A&quot;, &quot;B&quot;), each = 100),
                 y = c(rnorm(100, 20, 8), rnorm(100, 10, 7)))
ggplot(df, aes(x, y)) +
  geom_boxplot() + mytheme
# I want cut my y axis from 10 to 30.
ggplot(df, aes(x, y)) +
  geom_boxplot() +
  scale_y_continuous(limits = c(10, 30)) + mytheme
</code></pre>

<p><img src="assets/fig/lec05_boxplot8-1.png" title="plot of chunk lec05_boxplot8" alt="plot of chunk lec05_boxplot8" width="500px" height="400px" /></p>

<p>Note that the computed median changed! </p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-64" style="background:;">
  
  <hgroup>
    <h2>When you use <code>limits</code> in <code>scale_</code>, ggplot will treat data points outside the range as <code>NA</code>.</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li><p>If you don&#39;t want this to happen, but simply &quot;zoom in&quot;, use <code>coord_cartesian</code>. More details later. </p></li>
<li><p>Axis limits can also be changed with <code>xlim</code>, <code>ylim</code> as in base plots.</p></li>
</ul>

<pre><code class="r">ggplot(df, aes(x, y)) +
  geom_boxplot() +
  ylim(10, 30) + mytheme
</code></pre>

<p><img src="assets/fig/lec05_boxplot9-1.png" title="plot of chunk lec05_boxplot9" alt="plot of chunk lec05_boxplot9" width="400px" height="400px" /></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-65" style="background:;">
  
  <hgroup>
    <h2>Take-home</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>Visualization is as important as statistics. Both are needed.</li>
<li>Visualization can help finding &quot;bugs&quot; in the data</li>
<li>Grammar of graphics separates data, aesthetics, and geometries</li>
<li>Show as much as the raw data as you can:

<ul>
<li>Extend boxplot and barplots with beeswarm plots</li>
<li>Combine density and individual data points in 1D or 2D.</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-66" style="background:;">
  
  <hgroup>
    <h2>References</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>Main reference: <a href="https://www.udacity.com/courses/all">Udacity&#39;s Data Visualization and D3.js</a></li>
<li>perceptual edge:

<ul>
<li><a href="http://www.perceptualedge.com/articles/ie/the_right_graph.pdf">the right graph</a></li>
<li><a href="http://www.perceptualedge.com/articles/ie/visual_perception.pdf">visual perception</a></li>
<li><a href="http://www.perceptualedge.com/articles/visual_business_intelligence/rules_for_using_color.pdf">rules for color</a></li>
<li><a href="http://www.perceptualedge.com/articles/b-eye/choosing_colors.pdf">choosing color</a></li>
</ul></li>
<li>flowingdata.com: <a href="http://flowingdata.com/2010/03/20/graphical-perception-learn-the-fundamentals-first/">graphical perception</a></li>
<li><a href="http://colorbrewer2.org/">Color Brewer</a></li>
<li>Graphics principles

<ul>
<li><a href="https://onlinelibrary.wiley.com/doi/full/10.1002/pst.1912">paper</a></li>
<li><a href="https://graphicsprinciples.github.io/">cheatsheet</a></li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-67" style="background:;">
  
  <hgroup>
    <h2>Plotting libraries</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li><a href="http://www.r-graph-gallery.com/portfolio/ggplot2-package/">http://www.r-graph-gallery.com/portfolio/ggplot2-package/</a></li>
<li><a href="http://ggplot2.tidyverse.org/reference/">http://ggplot2.tidyverse.org/reference/</a></li>
<li><a href="https://plot.ly/r/">https://plot.ly/r/</a></li>
<li><a href="https://plot.ly/ggplot2/">https://plot.ly/ggplot2/</a></li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='NA'>
         1
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Why plotting?'>
         2
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='NA'>
         3
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Solution'>
         4
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='The outlier...'>
         5
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='The outlier...'>
         6
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='The outlier...'>
         7
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Visualization and the scientific method'>
         8
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Our 3 visualization lectures'>
         9
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='NA'>
         10
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='NA'>
         11
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Grammar of Graphics'>
         12
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='ggplot2 and Grammar of Graphics'>
         13
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Grammar Defines Components of Graphics'>
         14
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Simple example: Human Development versus Corruption Perception'>
         15
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Simple scatter plot'>
         16
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='ggplot returns an object'>
         17
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='ggplot returns an object'>
         18
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='Mapping of aesthetics done globally at <code>ggplot()</code>'>
         19
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Mapping of aesthetics can be done globally at <code>ggplot()</code> or at individual layers'>
         20
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Mapping of aesthetics done at individual layers'>
         21
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Individual layer mapping cannot be recognized by other layers'>
         22
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='You can easily map variables to different colours, sizes or shapes!'>
         23
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='You can easily map variables to different colours, sizes or shapes!'>
         24
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='Aesthetic mappings can also be supplied in individual layers'>
         25
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='NA'>
         26
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='NA'>
         27
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='NA'>
         28
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='Answers'>
         29
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='NA'>
         30
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Histogram'>
         31
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='Histogram'>
         32
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='Histogram: setting the number of bins'>
         33
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='Density plots'>
         34
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='Kernel density plots - smoothing bandwidth'>
         35
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='Boxplot'>
         36
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='A boxplot example'>
         37
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='NA'>
         38
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='Solution'>
         39
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Boxplots and multi-modal distributions'>
         40
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=41 title='NA'>
         41
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=42 title='Boxplot by category'>
         42
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=43 title='Violin plot'>
         43
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=44 title='Beanplot'>
         44
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=45 title='Barplots'>
         45
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=46 title='When to use a Barplot?'>
         46
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=47 title='When to use a Barplot?'>
         47
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=48 title='Visualize uncertainty'>
         48
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=49 title='Barplots with error bars'>
         49
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=50 title='NA'>
         50
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=51 title='Scatterplot'>
         51
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=52 title='Scatterplot with too many colors can be hard to read'>
         52
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=53 title='2D density plots'>
         53
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=54 title='When to use a line plot?'>
         54
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=55 title='When to use a line plot?'>
         55
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=56 title='When to use a line plot?'>
         56
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=57 title='Line plot'>
         57
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=58 title='NA'>
         58
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=59 title='Every aesthetic has a scale'>
         59
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=60 title='Overwrite scales, example:'>
         60
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=61 title='Specify axis breaks'>
         61
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=62 title='Change axis title'>
         62
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=63 title='Change axis limits'>
         63
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=64 title='When you use <code>limits</code> in <code>scale_</code>, ggplot will treat data points outside the range as <code>NA</code>.'>
         64
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=65 title='Take-home'>
         65
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=66 title='References'>
         66
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=67 title='Plotting libraries'>
         67
      </a>
    </li>
    
    </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  <script src="libraries/widgets/bootstrap/js/bootstrap.min.js"></script>
<script src="libraries/widgets/bootstrap/js/bootbox.min.js"></script>
<script src="libraries/widgets/quiz/js/jquery.quiz.js"></script>
<script src="libraries/widgets/quiz/js/mustache.min.js"></script>
<script src="libraries/widgets/quiz/js/quiz-app.js"></script>

  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  
<script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>

  <script>  
  $(function (){ 
    $("#example").popover(); 
    $("[rel='tooltip']").tooltip(); 
  });  
  </script>  
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>